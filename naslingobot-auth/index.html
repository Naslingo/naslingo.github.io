<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Autenticación Spotify</title>
</head>
<body>
  <h1>Autenticación con Spotify</h1>
  <button id="authButton">Iniciar sesión con Spotify</button>
  <p id="codeDisplay" style="margin-top:20px; font-weight:bold;"></p>

  <script>
    // Detectar si hay ?code= en la URL
    const params = new URLSearchParams(window.location.search);
    const code = params.get("code");
    if (code) {
      document.getElementById("codeDisplay").innerText = "Código recibido: " + code;
    }

    // Botón para iniciar sesión
    document.getElementById("authButton").addEventListener("click", () => {
      const client_id = "06e21456c32841059192ce9a15b2b530";
      const redirect_uri = "https://naslingo.github.io/naslingobot-auth";
      const scope = "playlist-modify-public playlist-modify-private";
      const auth_url = `https://accounts.spotify.com/authorize?client_id=${client_id}&response_type=code&redirect_uri=${encodeURIComponent(redirect_uri)}&scope=${encodeURIComponent(scope)}`;
      window.location.href = auth_url;
    });
  </script>
</body>
</html>
